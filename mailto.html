<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MailTo Generator</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="mailto-page">
    <div id="navbar-container"></div>

    <div class="app-container">
        <div class="panel">
            <div class="main-content">
                <div id="app-startup-error" class="hidden app-startup-banner"></div>
                
                <div class="generator-section">
                    <div id="catalogue-view" class="view active">
                        <div class="section-header-wrapper">
                            <h3 class="section-header">Email Template Library</h3>
                            <div class="button-group">
                                <button id="btn-settings" class="button-base icon-btn" title="Settings"></button>
                                <button id="btn-new-folder" class="button-base icon-btn" title="New Folder"></button>
                            </div>
                        </div>

                        <div id="breadcrumb-container" class="breadcrumb-container"></div>
                        <div id="tree-list-container" class="tree-list-container"></div>
                    </div>
                </div>

                <div class="generator-section">
                    <div class="accordion-header" id="mailto-accordion-header" role="button" aria-expanded="false" aria-controls="mailto-accordion-content">
                        <h3 class="section-header">Create New Template</h3>
                        <button id="mailto-accordion-toggle" class="icon-btn" title="Toggle settings" tabindex="-1">
                            <span class="accordion-icon">▼</span>
                        </button>
                    </div>
                    
                    <div id="mailto-accordion-content" class="accordion-content collapsed">
                        <div id="editor-view" class="view">
                            <div class="section-header-wrapper" style="margin-top: 0.5rem;">
                                <h3 class="section-header" style="font-size: 0.9rem; color: var(--subtle-text);">Phase 1: Create or Upload</h3>
                            </div>

                            <div id="upload-wrapper" class="upload-wrapper form-group">
                                <input type="file" id="msg-upload" accept=".msg,.oft,.eml,.email">
                                <label for="msg-upload" class="button-base button-primary">
                                    Upload .msg, .oft, .eml, or .email file
                                </label>
                                <p>or drag and drop a file here</p>
                            </div>

                            <div class="divider"></div>

                            <div class="section-header-wrapper">
                                <h3 class="section-header" style="font-size: 0.9rem; color: var(--subtle-text);">Phase 2: Review and Edit Fields</h3>
                            </div>

                            <div class="form-group">
                                <label for="result-to">To</label>
                                <input type="text" id="result-to" class="sidebar-input">
                            </div>
                            <div class="form-group">
                                <label for="result-cc">CC</label>
                                <input type="text" id="result-cc" class="sidebar-input">
                            </div>
                            <div class="form-group">
                                <label for="result-bcc">BCC</label>
                                <input type="text" id="result-bcc" class="sidebar-input">
                            </div>
                            <div class="form-group">
                                <label for="result-subject">Subject</label>
                                <input type="text" id="result-subject" class="sidebar-input">
                            </div>
                            <div class="form-group">
                                <label for="result-body">Body (Text)</label>
                                <textarea id="result-body" class="sidebar-textarea"></textarea>
                            </div>
                            
                            <div class="form-group">
                                 <button id="btn-generate" class="button-base button-primary" style="width: 100%;">Generate Command</button>
                            </div>

                            <div id="output-wrapper" class="hidden">
                                <div class="divider"></div>
                                <div class="section-header-wrapper">
                                    <h3 class="section-header" style="font-size: 0.9rem; color: var(--subtle-text);">Phase 3: Generated Output</h3>
                                    <a href="#" id="result-link" target="_blank" class="button-base button-primary">Open in Email Client</a>
                                </div>
                                <div class="form-group">
                                    <div class="label-group">
                                        <label for="result-mailto">MailTo Command</label>
                                        <button id="copy-mailto-btn" class="button-base">Copy</button>
                                    </div>
                                    <textarea id="result-mailto" class="sidebar-textarea" readonly placeholder="Generated command will appear here..."></textarea>
                                </div>
                                
                                <div class="app-section-box" style="padding: 0.75rem; background-color: var(--info-bg); border-radius: var(--border-radius);">
                                     <div class="form-group">
                                        <label for="save-template-name">Template Name</label>
                                        <input type="text" id="save-template-name" class="sidebar-input" placeholder="e.g., Weekly Report Stub">
                                    </div>
                                    <div class="button-group">
                                        <button id="btn-save-to-library" class="button-base button-success">Save to Library</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <div id="modal-overlay" class="modal-overlay">
        <div id="modal-content" class="modal-content"></div>
    </div>
    <div id="toast" class="toast"></div>
    
    <button id="scroll-to-top" class="scroll-to-top-btn" title="Back to Top">↑</button>

    <script type="module" src="js/mailto-app.js"></script>
</body>
</html>
